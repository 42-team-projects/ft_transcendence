const svgFile = `
<svg width="1570" height="724" viewBox="0 0 1570 724" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M1 1H1569V719H1V1Z" stroke="#00FFFF" stroke-width="2"/>
<rect x="29" y="42" width="1512.16" height="644" fill="#00FFFF" fill-opacity="0.1"/>
<path d="M361.267 680.15L320 716.279H402.535L361.267 680.15Z" stroke="#00FFFF" stroke-width="2"/>
<path d="M1202.27 682.416L1161 718.545H1243.53L1202.27 682.416Z" stroke="#00FFFF" stroke-width="2"/>
<path d="M779.273 672.381L732.11 713.671H826.436L779.273 672.381Z" fill="#00FFFF"/>
<path d="M781.862 641.328L696 716.499H867.724L781.862 641.328Z" stroke="#00FFFF" stroke-width="2"/>
<rect y="713" width="1570" height="11" fill="#00FFFF"/>
<path d="M378 0H1184.24C1184.24 0 1180.13 10.3226 1172.39 10.3226C1164.66 10.3226 403.791 10.3226 393.475 10.3226C383.159 10.3226 378 0 378 0Z" fill="#00FFFF"/>
<path d="M566.644 26.0371L543.062 5.39195H590.225L566.644 26.0371Z" stroke="#00FFFF" stroke-width="2"/>
<path d="M989.581 26.0371L966 5.39195H1013.16L989.581 26.0371Z" stroke="#00FFFF" stroke-width="2"/>
<path d="M779.308 29.6162L755.321 8.28288H803.295L779.308 29.6162Z" fill="#00FFFF"/>
<path d="M778.569 45.5479L734 6.52859H823.138L778.569 45.5479Z" stroke="#00FFFF" stroke-width="2"/>
<path d="M1120.6 363.229H450M782.719 196V533.032" stroke="#00FFFF" stroke-opacity="0.7" stroke-width="2"/>
<rect x="780.129" y="330.25" width="5.15842" height="67.0969" fill="#00FFFF" fill-opacity="0.7"/>
<rect x="781.129" y="331.25" width="3.15842" height="65.0969" stroke="#00FFFF" stroke-opacity="0.7" stroke-width="2"/>
<rect x="744.038" y="361.303" width="77.3761" height="5.16129" fill="#00FFFF" fill-opacity="0.7"/>
<rect x="745.038" y="362.303" width="75.3761" height="3.16129" stroke="#00FFFF" stroke-opacity="0.7" stroke-width="2"/>
</svg>
`;

const svgFile2 = `
<svg width="1756" height="802" viewBox="0 0 1756 802" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M120.606 1H738.595L700.5 34.8624H146.003L61.3471 119.518H2.08789L120.606 1Z" fill="#cccccc" fill-opacity="0.7"/>
<path d="M1066.42 34.8624L1028.33 1H1642.08L1752.14 111.053H1701.34L1625.15 34.8624H1066.42Z" fill="#cccccc" fill-opacity="0.7"/>
<path d="M120.606 1H738.595L700.5 34.8624H146.003L61.3471 119.518H2.08789L120.606 1Z" stroke="#cccccc" stroke-opacity="0.7"/>
<path d="M1066.42 34.8624L1028.33 1H1642.08L1752.14 111.053H1701.34L1625.15 34.8624H1066.42Z" stroke="#cccccc" stroke-opacity="0.7"/>
<path d="M1066.42 34.8624L1028.33 1H1642.08L1752.14 111.053H1701.34L1625.15 34.8624H1066.42Z" fill="#cccccc" fill-opacity="0.7" stroke="#cccccc" stroke-opacity="0.7"/>
<path d="M1111.17 68.7593V56.0609H1039.22L1001.12 13.7329H755.618L713.29 56.0609H654.03L641.332 60.2937L654.03 68.7593H755.618L768.316 60.2937H992.655L1009.59 68.7593H1111.17Z" fill="#cccccc" fill-opacity="0.3"/>
<path d="M57.0475 144.95H6.25391V318.495L31.6507 301.564V242.305L57.0475 212.675V144.95Z" fill="#cccccc" fill-opacity="0.3"/>
<path d="M61.2592 665.599H2L2 487.822L31.6296 505.166L31.6296 565.87L61.2592 596.223L61.2592 665.599Z" fill="#cccccc" fill-opacity="0.3"/>
<path d="M31.6507 487.8L6.25391 458.17V348.118L31.6507 322.721V487.8Z" fill="#cccccc" fill-opacity="0.7" stroke="#cccccc" stroke-opacity="0.7"/>
<path d="M1699.4 140.648H1750.19V314.193L1724.8 297.262V238.002L1699.4 208.373V140.648Z" fill="#cccccc" fill-opacity="0.3"/>
<path d="M1695.18 661.309H1754.44V483.532L1724.81 500.876V561.58L1695.18 591.933V661.309Z" fill="#cccccc" fill-opacity="0.3"/>
<path d="M1724.8 483.483L1750.19 453.854V343.801L1724.8 318.404V483.483Z" fill="#cccccc" fill-opacity="0.7" stroke="#cccccc" stroke-opacity="0.7"/>
<path d="M1635.9 801L1017.91 801L1056 767.138L1610.5 767.138L1695.16 682.482H1754.42L1635.9 801Z" fill="#cccccc" fill-opacity="0.7"/>
<path d="M696.216 767.138L734.311 801L120.555 801L10.5021 690.947H61.2957L137.486 767.138L696.216 767.138Z" fill="#cccccc" fill-opacity="0.7"/>
<path d="M1635.9 801L1017.91 801L1056 767.138L1610.5 767.138L1695.16 682.482H1754.42L1635.9 801Z" stroke="#cccccc" stroke-opacity="0.7"/>
<path d="M696.216 767.138L734.311 801L120.555 801L10.5021 690.947H61.2957L137.486 767.138L696.216 767.138Z" stroke="#cccccc" stroke-opacity="0.7"/>
<path d="M1635.9 801L1017.91 801L1056 767.138L1610.5 767.138L1695.16 682.482H1754.42L1635.9 801Z" fill="#cccccc" fill-opacity="0.7" stroke="#cccccc" stroke-opacity="0.7"/>
<path d="M696.215 767.138L734.311 801L120.554 801L10.5016 690.947H61.2952L137.486 767.138L696.215 767.138Z" fill="#cccccc" fill-opacity="0.7" stroke="#cccccc" stroke-opacity="0.7"/>
<path d="M641.157 733.245V745.944H713.115L751.21 788.272H996.712L1039.04 745.944H1098.3L1111 741.711L1098.3 733.245H996.712L984.014 741.711H759.675L742.744 733.245H641.157Z" fill="#cccccc" fill-opacity="0.3"/>
<rect x="126" y="76" width="1513" height="644" rx="21" fill="#cccccc" fill-opacity="0.3"/>
<path d="M905 76L904 720" stroke="white" stroke-opacity="0.5"/>
<circle cx="905" cy="398" r="64.5" stroke="white" stroke-opacity="0.5"/>
</svg>

`;

export class CustomSliders extends HTMLElement {
    constructor() {
        super();
        this.attachShadow({
            mode: "open"
        });
        this.shadowRoot.innerHTML = `
            <style> ${cssContent} </style>
            <div class="field-container">
                <div class="label">
                    <h2></h2>
                    <p></p>
                </div>
                <div class="box">
                    <div class="left-arrow"></div>
                    <div id="slider">
                        <div id="overflow">
                            <div class="inner">
                                <div class="slide">
                                    ${svgFile}
                                </div>
                                
                                <div class="slide">
                                    ${svgFile2}
                                </div>
                              
                                <div class="slide">
                                    ${svgFile}
                                </div>
                                                                
                                <div class="slide">
                                    ${svgFile2}
                                </div>
                              
                            </div>
                        </div>
                    </div>
                    <div class="right-arrow"></div>
                </div>
            </div>
        `;
    }

    connectedCallback() {
        this.shadowRoot.querySelector(".box").style.width = this.width;
        this.shadowRoot.querySelector(".box").style.height = this.height;
        this.shadowRoot.querySelector("h2").textContent = this.label;
        this.shadowRoot.querySelector("p").textContent = this.description;
        let rects = this.shadowRoot.querySelectorAll("svg rect[fill]");
        rects.forEach(elem => {
            elem.style.fill = this.gameColor;
        });
        rects = this.shadowRoot.querySelectorAll("svg rect[stroke]");
        rects.forEach(elem => {
            elem.style.stroke = this.gameColor;
        });
        let paths = this.shadowRoot.querySelectorAll("svg path[fill]");
        paths.forEach(elem => {
            elem.style.fill = this.gameColor;
        });
        paths = this.shadowRoot.querySelectorAll("svg path[stroke]");
        paths.forEach(elem => {
            elem.style.stroke = this.gameColor;
        });



        const slides = this.shadowRoot.querySelector('.inner');
        const totalSlides = this.shadowRoot.querySelectorAll('.slide').length;
        let currentIndex = 0;

        this.shadowRoot.querySelector('.right-arrow').addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % totalSlides;
            slides.style.marginLeft = `-${currentIndex * 100}%`;
        });

        this.shadowRoot.querySelector('.left-arrow').addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
            slides.style.marginLeft = `-${currentIndex * 100}%`;
        });

    }

    disconnectedCallback() {
        // Clean up if necessary
    }

    static observedAttributes = ["width", "height", "label", "description", "game-color"];

    attributeChangedCallback(attrName, oldValue, newValue) {
        if (attrName == "width")
            this.shadowRoot.querySelector(".box").style.width = newValue;
        if (attrName == "height")
            this.shadowRoot.querySelector(".box").style.height = newValue;
        if (attrName == "label")
            this.shadowRoot.querySelector("h2").textContent = newValue;
        if (attrName == "description")
            this.shadowRoot.querySelector("p").textContent = newValue;
        if (attrName == "game-color")
        {
            let rects = this.shadowRoot.querySelectorAll("svg rect[fill]");
            rects.forEach(elem => {
                elem.style.fill = newValue;
            });
            rects = this.shadowRoot.querySelectorAll("svg rect[stroke]");
            rects.forEach(elem => {
                elem.style.stroke = newValue;
            });
            let paths = this.shadowRoot.querySelectorAll("svg path[fill]");
            paths.forEach(elem => {
                elem.style.fill = newValue;
            });
            paths = this.shadowRoot.querySelectorAll("svg path[stroke]");
            paths.forEach(elem => {
                elem.style.stroke = newValue;
            });
        }

    }
    
    set label(value) { this.setAttribute("label", value)};
    get label() { return this.getAttribute("label")};

    set description(value) { this.setAttribute("description", value)};
    get description() { return this.getAttribute("description")};

    set width(value) { this.setAttribute("width", value)};
    get width() { return this.getAttribute("width")};
    
    set height(value) { this.setAttribute("height", value)};
    get height() { return this.getAttribute("height")};

    set gameColor(value) { this.setAttribute("game-color", value)};
    get gameColor() { return this.getAttribute("game-color")};


}

const cssContent = /*css*/`
    * {
        margin: 0;
        padding: 0;
    }

    :host {
        width: 100%;
        flex-wrap: wrap;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .field-container {
        width: 90%;
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        gap: 10px;
    }

    .label {
        flex: 1;
        min-width: 250px;
    }

    .box {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 30px;
    }

    p {
        margin: 0;
        padding: 0;
        font-size: 10px;
        color: #d9d9d9;
        margin: 5px 0;
        opacity: 0.5;
    }


    .left-arrow, .right-arrow {
        width: 0;
        height: 0;
        border-top: 20px solid transparent;
        border-right: 28px solid aqua;
        border-bottom: 20px solid transparent;
    }
    .right-arrow {
        transform: rotate(180deg);
    }



    #slider {
        width: 60%;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
    }

 
    .slide svg {
        width: 100%;
        height: min-content;
    }


    #overflow {
        width: 100%;
        overflow: hidden;
    }

    .inner {
        transition: margin-left 800ms cubic-bezier(0.770, 0.000, 0.175, 1.000);
        width: 400%;
        display: flex;
    }

    .slide {
        width: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #fff;
        padding: 0 20px;
    }


`;

customElements.define("custom-sliders", CustomSliders);